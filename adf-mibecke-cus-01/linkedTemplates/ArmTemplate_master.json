{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "adf-mibecke-cus-01"
		},
		"AzureFunction1_functionKey": {
			"type": "secureString",
			"metadata": "Secure string for 'functionKey' of 'AzureFunction1'"
		},
		"Salesforce Data API_clientSecret": {
			"type": "secureString",
			"metadata": "Secure string for 'clientSecret' of 'Salesforce Data API'"
		},
		"Salesforce1_clientSecret": {
			"type": "secureString",
			"metadata": "Secure string for 'clientSecret' of 'Salesforce1'"
		},
		"AzureDataExplorer1_properties_typeProperties_endpoint": {
			"type": "string",
			"defaultValue": "https://adx-mibecke-01.centralus.kusto.windows.net"
		},
		"AzureDataExplorer1_properties_typeProperties_database": {
			"type": "string",
			"defaultValue": "cona-salesforce-logs"
		},
		"AzureDataLakeStorage1_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://samibeckecus01.dfs.core.windows.net/"
		},
		"AzureFunction1_properties_typeProperties_functionAppUrl": {
			"type": "string",
			"defaultValue": "https://conafunc001.azurewebsites.net"
		},
		"AzureKeyVault1_properties_typeProperties_baseUrl": {
			"type": "string",
			"defaultValue": "https://kv-mibecke-shared.vault.azure.net/"
		},
		"HttpServer1_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://cona.my.salesforce.com/services/data"
		},
		"Salesforce Data API_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://cona.my.salesforce.com/services/data/"
		},
		"Salesforce Data API_properties_typeProperties_clientId": {
			"type": "string",
			"defaultValue": "3MVG9KsVczVNcM8wnLqsWomDZMgwL2Aenv7bVWIAMmyrKP.P5xCJ5cals7fK0IcwmyTGnuSuJSDyPTzghfAMI"
		},
		"Salesforce1_properties_typeProperties_environmentUrl": {
			"type": "string",
			"defaultValue": "https://cona.my.salesforce.com"
		},
		"Salesforce1_properties_typeProperties_clientId": {
			"type": "string",
			"defaultValue": "3MVG9KsVczVNcM8wnLqsWomDZMgwL2Aenv7bVWIAMmyrKP.P5xCJ5cals7fK0IcwmyTGnuSuJSDyPTzghfAMI"
		},
		"loganalytics_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://dce-ingestion-gczf.centralus-1.ingest.monitor.azure.com/dataCollectionRules/dcr-a3447c69e7ab4fbcb629745a2505606b/streams/Custom-SalesforceLogs_CL?api-version=2023-01-01"
		},
		"loganalytics_properties_typeProperties_aadResourceId": {
			"type": "string",
			"defaultValue": "https://monitor.azure.com"
		},
		"AzureSynapseAnalytics432_properties_privateLinkResourceId": {
			"type": "string",
			"defaultValue": "/subscriptions/7a074df0-d2da-4def-92f3-cef1819caf9e/resourceGroups/rg-synapse/providers/Microsoft.Synapse/workspaces/syn-mibecke-cus-01"
		},
		"AzureSynapseAnalytics432_properties_groupId": {
			"type": "string",
			"defaultValue": "sql"
		},
		"AzureSynapseAnalytics432_properties_fqdns": {
			"type": "array",
			"defaultValue": [
				"syn-mibecke-cus-01.sql.azuresynapse.net"
			]
		},
		"AzureBlobStorage1_properties_typeProperties_serviceEndpoint": {
			"type": "string",
			"defaultValue": "https://rgconab540.blob.core.windows.net/"
		},
		"default_properties_primaryWorkspaceUrl_value": {
			"type": "string",
			"defaultValue": "https://adb-3001519857218975.15.azuredatabricks.net"
		},
		"default_properties_failoverWorkspaceUrl_value": {
			"type": "string",
			"defaultValue": "https://adb-1386680983746450.10.azuredatabricks.net/"
		},
		"default_properties_primaryWorkspaceResourceId_value": {
			"type": "string",
			"defaultValue": "/subscriptions/7a074df0-d2da-4def-92f3-cef1819caf9e/resourceGroups/rg-data/providers/Microsoft.Databricks/workspaces/adb-cus-01"
		},
		"default_properties_failoverWorkspaceResourceId_value": {
			"type": "string",
			"defaultValue": "/subscriptions/7a074df0-d2da-4def-92f3-cef1819caf9e/resourceGroups/rg-data/providers/Microsoft.Databricks/workspaces/adb-eus2-01"
		},
		"default_properties_primaryInstancePoolId_value": {
			"type": "string",
			"defaultValue": "0923-201003-yarn12-pool-n1bcdevw"
		},
		"default_properties_failoverInstancePoolId_value": {
			"type": "string",
			"defaultValue": "0923-200944-gym276-pool-ezzwvw1s"
		},
		"default_properties_workspaceUrl_value": {
			"type": "string",
			"defaultValue": "https://adb-3001519857218975.15.azuredatabricks.net/"
		},
		"containerUri": {
			"type": "string",
			"metadata": "URI to storage account containing linked ARM templates"
		},
		"containerSasToken": {
			"type": "string",
			"metadata": "Sas token to storage account containing linked ARM templates"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "adf-mibecke-cus-01_ArmTemplate_0",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2024-03-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_0.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					},
					"default_properties_primaryWorkspaceUrl_value": {
						"value": "[parameters('default_properties_primaryWorkspaceUrl_value')]"
					},
					"default_properties_failoverWorkspaceUrl_value": {
						"value": "[parameters('default_properties_failoverWorkspaceUrl_value')]"
					},
					"default_properties_primaryWorkspaceResourceId_value": {
						"value": "[parameters('default_properties_primaryWorkspaceResourceId_value')]"
					},
					"default_properties_failoverWorkspaceResourceId_value": {
						"value": "[parameters('default_properties_failoverWorkspaceResourceId_value')]"
					},
					"default_properties_primaryInstancePoolId_value": {
						"value": "[parameters('default_properties_primaryInstancePoolId_value')]"
					},
					"default_properties_failoverInstancePoolId_value": {
						"value": "[parameters('default_properties_failoverInstancePoolId_value')]"
					},
					"default_properties_workspaceUrl_value": {
						"value": "[parameters('default_properties_workspaceUrl_value')]"
					},
					"AzureKeyVault1_properties_typeProperties_baseUrl": {
						"value": "[parameters('AzureKeyVault1_properties_typeProperties_baseUrl')]"
					},
					"AzureSynapseAnalytics432_properties_privateLinkResourceId": {
						"value": "[parameters('AzureSynapseAnalytics432_properties_privateLinkResourceId')]"
					},
					"AzureSynapseAnalytics432_properties_groupId": {
						"value": "[parameters('AzureSynapseAnalytics432_properties_groupId')]"
					},
					"AzureSynapseAnalytics432_properties_fqdns": {
						"value": "[parameters('AzureSynapseAnalytics432_properties_fqdns')]"
					},
					"AzureDataExplorer1_properties_typeProperties_endpoint": {
						"value": "[parameters('AzureDataExplorer1_properties_typeProperties_endpoint')]"
					},
					"AzureDataExplorer1_properties_typeProperties_database": {
						"value": "[parameters('AzureDataExplorer1_properties_typeProperties_database')]"
					},
					"AzureDataLakeStorage1_properties_typeProperties_url": {
						"value": "[parameters('AzureDataLakeStorage1_properties_typeProperties_url')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "adf-mibecke-cus-01_ArmTemplate_1",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2024-03-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_1.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					},
					"AzureFunction1_functionKey": {
						"value": "[parameters('AzureFunction1_functionKey')]"
					},
					"Salesforce Data API_clientSecret": {
						"value": "[parameters('Salesforce Data API_clientSecret')]"
					},
					"Salesforce1_clientSecret": {
						"value": "[parameters('Salesforce1_clientSecret')]"
					},
					"AzureFunction1_properties_typeProperties_functionAppUrl": {
						"value": "[parameters('AzureFunction1_properties_typeProperties_functionAppUrl')]"
					},
					"HttpServer1_properties_typeProperties_url": {
						"value": "[parameters('HttpServer1_properties_typeProperties_url')]"
					},
					"Salesforce Data API_properties_typeProperties_url": {
						"value": "[parameters('Salesforce Data API_properties_typeProperties_url')]"
					},
					"Salesforce Data API_properties_typeProperties_clientId": {
						"value": "[parameters('Salesforce Data API_properties_typeProperties_clientId')]"
					},
					"Salesforce1_properties_typeProperties_environmentUrl": {
						"value": "[parameters('Salesforce1_properties_typeProperties_environmentUrl')]"
					},
					"Salesforce1_properties_typeProperties_clientId": {
						"value": "[parameters('Salesforce1_properties_typeProperties_clientId')]"
					},
					"loganalytics_properties_typeProperties_url": {
						"value": "[parameters('loganalytics_properties_typeProperties_url')]"
					},
					"loganalytics_properties_typeProperties_aadResourceId": {
						"value": "[parameters('loganalytics_properties_typeProperties_aadResourceId')]"
					},
					"AzureBlobStorage1_properties_typeProperties_serviceEndpoint": {
						"value": "[parameters('AzureBlobStorage1_properties_typeProperties_serviceEndpoint')]"
					}
				}
			},
			"dependsOn": [
				"[resourceId('Microsoft.Resources/deployments', 'adf-mibecke-cus-01_ArmTemplate_0')]"
			]
		},
		{
			"name": "adf-mibecke-cus-01_ArmTemplate_2",
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2024-03-01",
			"properties": {
				"mode": "incremental",
				"templateLink": {
					"uri": "[concat(parameters('containerUri'), '/ArmTemplate_2.json', parameters('containerSasToken'))]",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"factoryName": {
						"value": "[parameters('factoryName')]"
					}
				}
			},
			"dependsOn": [
				"[resourceId('Microsoft.Resources/deployments', 'adf-mibecke-cus-01_ArmTemplate_1')]"
			]
		}
	]
}